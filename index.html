<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday! üéÇ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #d4a574; /* Warm beige accent */
            --secondary: #8b7355; /* Muted brown */
            --accent: #c19a6b; /* Gold/beige accent */
            --light: #ffffff;
            --dark: #5d534a; /* Dark brown */
            --bg-color: #f8f5f0; /* Cream background */
            --text-color: #4a4238; /* Professional dark brown text */
            --bg-gradient: linear-gradient(135deg, #f8f5f0 0%, #f0ebe2 100%);
        }
        
        body {
            background: var(--bg-gradient);
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
        }
        
        /* Floating Emojis */
        .floating-emoji {
            position: fixed;
            font-size: 1.8rem;
            z-index: -1;
            opacity: 0.6;
            animation: float 4s infinite linear;
            pointer-events: none;
            filter: drop-shadow(0 0 2px rgba(93, 83, 74, 0.3));
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0.8);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100px) rotate(360deg) scale(1.1);
                opacity: 0;
            }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
        }
        
        /* Header Section */
        header {
            text-align: center;
            padding: 20px;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 70vh;
        }
        
        .title-container {
            margin-bottom: 40px;
        }
        
        .birthday-title {
            font-family: 'Dancing Script', cursive;
            font-size: 4.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            line-height: 1;
            min-height: 90px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .title-text {
            background: linear-gradient(45deg, var(--primary), var(--accent), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 8px rgba(212, 165, 116, 0.3);
            letter-spacing: 1px;
        }
        
        .name-text {
            color: var(--secondary);
            font-weight: 800;
            text-shadow: 0 0 10px rgba(139, 115, 85, 0.5);
            position: relative;
        }
        
        .name-text::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
        }
        
        .title-cursor {
            display: inline-block;
            width: 3px;
            height: 70px;
            background-color: var(--accent);
            margin-left: 5px;
            animation: blink 0.6s infinite;
            vertical-align: middle;
        }
        
        .subtitle {
            font-size: 1.6rem;
            color: var(--secondary);
            font-weight: 400;
            letter-spacing: 0.5px;
            line-height: 1.3;
            max-width: 700px;
            margin: 0 auto 30px;
            min-height: 30px;
        }
        
        .subtitle-cursor {
            display: inline-block;
            width: 2px;
            height: 30px;
            background-color: var(--accent);
            margin-left: 3px;
            animation: blink 0.6s infinite;
            vertical-align: middle;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* Button */
        .btn {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 6px 20px rgba(212, 165, 116, 0.4);
            font-weight: 700;
            letter-spacing: 1px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            animation: pulse 0.8s infinite, floatBtn 3s infinite ease-in-out;
            position: relative;
            overflow: hidden;
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 6px 20px rgba(212, 165, 116, 0.4);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 8px 25px rgba(212, 165, 116, 0.6), 0 0 15px rgba(193, 154, 107, 0.4);
            }
        }
        
        @keyframes floatBtn {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }
        
        .btn:hover {
            transform: translateY(-3px) scale(1.08);
            box-shadow: 0 8px 30px rgba(212, 165, 116, 0.6), 0 0 20px rgba(139, 115, 85, 0.4);
        }
        
        /* Memories Section */
        .memories-section {
            padding: 40px 20px;
            width: 100%;
            display: none;
            flex: 1;
        }
        
        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 40px;
            color: var(--dark);
            position: relative;
            font-family: 'Dancing Script', cursive;
        }
        
        .gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin-top: 30px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
            perspective: 1500px;
        }
        
        .memory-card {
            border-radius: 15px;
            overflow: hidden;
            height: 300px;
            position: relative;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(139, 115, 85, 0.15);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            opacity: 0;
            animation: cardAppear 0.4s ease-out forwards;
            transform-style: preserve-3d;
            transform: perspective(1000px) rotateX(0) rotateY(0) scale(1);
        }
        
        @keyframes cardAppear {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .memory-card:nth-child(1) { animation-delay: 0.1s; }
        .memory-card:nth-child(2) { animation-delay: 0.2s; }
        .memory-card:nth-child(3) { animation-delay: 0.3s; }
        .memory-card:nth-child(4) { animation-delay: 0.4s; }
        .memory-card:nth-child(5) { animation-delay: 0.5s; }
        .memory-card:nth-child(6) { animation-delay: 0.6s; }
        .memory-card:nth-child(7) { animation-delay: 0.7s; }
        .memory-card:nth-child(8) { animation-delay: 0.8s; }
        .memory-card:nth-child(9) { animation-delay: 0.9s; }
        
        .memory-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            will-change: transform;
        }
        
        .memory-card:hover {
            transform: perspective(1000px) rotateX(5deg) rotateY(5deg) scale(1.05);
            box-shadow: 0 25px 50px rgba(139, 115, 85, 0.25),
                        0 0 30px rgba(193, 154, 107, 0.2);
            z-index: 10;
        }
        
        .memory-card:hover .memory-img {
            transform: scale(1.15) rotate(1deg);
        }
        
        /* Enhanced Caption Overlay */
        .memory-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, 
                        rgba(93, 83, 74, 0.95) 0%, 
                        rgba(93, 83, 74, 0.8) 30%,
                        rgba(93, 83, 74, 0.5) 60%,
                        transparent 100%);
            padding: 20px 15px 15px;
            transform: translateY(100%);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(5px);
            min-height: 40%;
            display: flex;
            align-items: flex-end;
        }
        
        /* Desktop hover behavior - show overlay on hover */
        .memory-card:hover .memory-overlay {
            transform: translateY(0);
        }
        
        /* Mobile scroll behavior - show overlay when in view */
        .memory-card.scroll-visible .memory-overlay {
            transform: translateY(0);
        }
        
        /* Tap to show on mobile */
        .memory-card.tap-visible .memory-overlay {
            transform: translateY(0);
        }
        
        .memory-text {
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.9);
            line-height: 1.4;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.1s;
            text-align: center;
            width: 100%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            letter-spacing: 0.3px;
        }
        
        /* Desktop hover behavior */
        .memory-card:hover .memory-text {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Mobile scroll/tap behavior */
        .memory-card.scroll-visible .memory-text,
        .memory-card.tap-visible .memory-text {
            opacity: 1;
            transform: translateY(0);
            transition-delay: 0.2s;
        }
        
        /* Add a subtle border effect on hover */
        .memory-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--primary), var(--accent), var(--secondary));
            border-radius: 17px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        
        .memory-card:hover::before {
            opacity: 0.6;
        }
        
        /* Message Box */
        .message-box {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 35px;
            margin: 30px auto;
            max-width: 800px;
            border: 1px solid rgba(212, 165, 116, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 15px 35px rgba(139, 115, 85, 0.15);
            display: none;
            opacity: 0;
            transform: scale(0.9);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-height: 70vh;
            overflow-y: auto;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .message-box.visible {
            opacity: 1;
            transform: scale(1);
            display: block;
        }
        
        .message-content {
            font-size: 1.3rem;
            line-height: 1.6;
            color: var(--text-color);
            text-align: left;
            white-space: pre-wrap;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .message-cursor {
            display: inline-block;
            width: 3px;
            height: 1.8rem;
            background-color: var(--accent);
            animation: blink 0.6s infinite;
            vertical-align: middle;
            margin-left: 2px;
        }
        
        /* Quote Show Button */
        .quote-btn {
            background: linear-gradient(45deg, var(--accent), var(--primary));
            color: white;
            border: none;
            padding: 14px 35px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 6px 20px rgba(193, 154, 107, 0.4);
            font-weight: 700;
            letter-spacing: 1px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            animation: pulse 0.8s infinite;
        }
        
        .quote-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(193, 154, 107, 0.6), 0 0 15px rgba(212, 165, 116, 0.4);
        }
        
        /* Footer - Fixed at bottom */
        footer {
            text-align: center;
            padding: 20px;
            color: var(--secondary);
            font-size: 0.9rem;
            width: 100%;
            background: rgba(248, 245, 240, 0.9);
            backdrop-filter: blur(5px);
            border-top: 1px solid rgba(212, 165, 116, 0.3);
            margin-top: auto;
            flex-shrink: 0;
        }
        
        .heart {
            color: var(--primary);
            animation: heartbeat 0.8s infinite;
            display: inline-block;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }
        
        /* Sparkle effect */
        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--accent);
            border-radius: 50%;
            pointer-events: none;
            animation: sparklePop 0.3s forwards;
        }
        
        @keyframes sparklePop {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(1.5);
                opacity: 0;
            }
        }
        
        /* Quote Button Container */
        .quote-button-container {
            text-align: center;
            margin: 30px 0;
            display: none;
        }
        
        /* Scroll indicator for mobile */
        .scroll-indicator {
            display: none;
            text-align: center;
            margin: 15px 0 25px;
            color: var(--secondary);
            font-size: 0.9rem;
            opacity: 0.7;
            animation: fadeInOut 2s infinite;
        }
        
        @keyframes fadeInOut {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        /* Responsive Design */
        @media (max-width: 1024px) {
            .gallery {
                grid-template-columns: repeat(2, 1fr);
                max-width: 700px;
            }
            
            .birthday-title {
                font-size: 4rem;
            }
            
            .memory-card {
                height: 280px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            header {
                min-height: 60vh;
                padding: 15px;
            }
            
            .birthday-title {
                font-size: 3.2rem;
                min-height: 70px;
                flex-direction: column;
                gap: 5px;
            }
            
            .title-cursor {
                height: 55px;
            }
            
            .subtitle {
                font-size: 1.3rem;
                max-width: 90%;
            }
            
            .subtitle-cursor {
                height: 25px;
            }
            
            .btn {
                padding: 14px 35px;
                font-size: 1.1rem;
            }
            
            .gallery {
                grid-template-columns: 1fr;
                max-width: 400px;
                gap: 20px;
            }
            
            .memory-card {
                height: 320px;
                transform: none !important; /* Disable tilt on mobile */
            }
            
            .memory-img {
                transform: none !important; /* Disable image transform on mobile */
            }
            
            .scroll-indicator {
                display: block;
            }
            
            .message-box {
                padding: 25px;
                margin: 20px;
                max-height: 60vh;
                background: rgba(255, 255, 255, 0.95);
            }
            
            .message-content {
                font-size: 1.1rem;
            }
            
            .section-title {
                font-size: 2.2rem;
            }
            
            footer {
                padding: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .birthday-title {
                font-size: 2.5rem;
                min-height: 60px;
            }
            
            .title-cursor {
                height: 45px;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            .subtitle-cursor {
                height: 22px;
            }
            
            .btn {
                padding: 12px 30px;
                font-size: 1rem;
            }
            
            .quote-btn {
                padding: 12px 30px;
                font-size: 1rem;
            }
            
            .gallery {
                max-width: 100%;
            }
            
            .memory-card {
                height: 280px;
            }
            
            .message-box {
                padding: 20px 15px;
                margin: 15px;
                max-height: 55vh;
                background: rgba(255, 255, 255, 0.97);
            }
            
            .message-content {
                font-size: 1rem;
                line-height: 1.5;
            }
            
            .section-title {
                font-size: 1.8rem;
                margin-bottom: 25px;
            }
            
            .memory-text {
                font-size: 1rem;
            }
            
            footer {
                padding: 12px;
                font-size: 0.85rem;
            }
        }
        
        @media (max-height: 600px) {
            header {
                min-height: 50vh;
            }
            
            .message-box {
                max-height: 50vh;
            }
            
            .memory-card {
                height: 220px;
            }
        }
        
        /* Fix for very tall screens */
        @media (min-height: 800px) {
            .container {
                justify-content: flex-start;
                padding-top: 50px;
            }
            
            .message-box {
                max-height: 60vh;
            }
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Hide cursor when not needed */
        .cursor-hidden {
            display: none !important;
        }
        
        /* Mobile-only classes */
        @media (max-width: 768px) {
            .memory-card:not(.scroll-visible):not(.tap-visible) .memory-overlay {
                transform: translateY(100%);
            }
            
            .memory-card:not(.scroll-visible):not(.tap-visible) .memory-text {
                opacity: 0;
                transform: translateY(20px);
            }
            
            .memory-card.tap-visible {
                z-index: 10;
                box-shadow: 0 25px 50px rgba(139, 115, 85, 0.25),
                            0 0 30px rgba(193, 154, 107, 0.2);
            }
        }
    </style>
</head>
<body>
    <!-- Floating Emojis Background -->
    <div id="emoji-container"></div>
    
    <div class="container">
        <!-- Header Section -->
        <header id="header-section">
            <div class="title-container">
                <div class="birthday-title">
                    <span id="title-text"></span>
                    <span id="name-text"></span>
                    <span class="title-cursor" id="title-cursor"></span>
                </div>
                <p class="subtitle" id="subtitle">
                    <span id="subtitle-text"></span>
                    <span class="subtitle-cursor" id="subtitle-cursor"></span>
                </p>
            </div>
            
            <button class="btn" id="memories-btn">
                <i class="fas fa-images"></i> View Gallery
            </button>
        </header>
        
        <!-- Memories Gallery Section -->
        <section class="memories-section" id="memories-section">
            <h2 class="section-title">Gallery</h2>
            <div class="scroll-indicator" id="scroll-indicator">
                <i class="fas fa-chevron-down"></i> Scroll to reveal captions
            </div>
            <div class="gallery" id="gallery">
                <!-- Memory cards will be generated by JavaScript -->
            </div>
            
            <!-- Message Box -->
            <div class="message-box" id="message-box">
                <div class="message-content" id="message-content"></div>
            </div>
            
            <!-- Quote Show Button -->
            <div class="quote-button-container" id="quote-button-container">
                <button class="quote-btn" id="quote-btn">
                    <i class="fas fa-heart"></i> Read Special Birthday Message
                </button>
            </div>
        </section>
    </div>
    
    <!-- Footer - Fixed at bottom -->
    <footer>
        <p>Made with <span class="heart">‚ù§Ô∏è</span> for a special person</p>
    </footer>

    <script>
        // Text elements
        const titleElement = document.getElementById('title-text');
        const nameElement = document.getElementById('name-text');
        const titleCursor = document.getElementById('title-cursor');
        const subtitleElement = document.getElementById('subtitle-text');
        const subtitleCursor = document.getElementById('subtitle-cursor');
        const messageBox = document.getElementById('message-box');
        const messageContent = document.getElementById('message-content');
        const memoriesBtn = document.getElementById('memories-btn');
        const memoriesSection = document.getElementById('memories-section');
        const gallery = document.getElementById('gallery');
        const emojiContainer = document.getElementById('emoji-container');
        const quoteBtn = document.getElementById('quote-btn');
        const quoteButtonContainer = document.getElementById('quote-button-container');
        const scrollIndicator = document.getElementById('scroll-indicator');
        
        // Texts
        const titleText = "Happy Birthday ";
        const nameText = "Kriti üéÇ‚ù§Ô∏è";
        const subtitleText = "Today is all about celebrating you and the joy you bring into your life";
        const birthdayMessage = `My dearest,

On this special day, I want you to know how incredibly amazing you are. Every moment spent with you is a treasure, and your laughter is the melody that brightens my world. 

You have this incredible ability to make everything better just by being you. Your kindness, intelligence, and beautiful spirit inspire me every single day. I'm so grateful for all our memories together and excited for all the adventures that await us.

May this birthday bring you all the happiness you deserve, and may this year be filled with love, laughter, and dreams coming true. You're not just a year older today ‚Äì you're a year more wonderful, more incredible, and more loved.

Happy Birthday to the most amazing person I know! May your day be as beautiful as you are. üéÇüéâüíù

With all my love,
Your Best Friend`;
        
        // Emojis
        const loveEmojis = ['‚ù§Ô∏è', 'üíñ', 'üíï', 'üíó', 'üíì', 'üíû', 'üíò', 'üíù', 'üéÇ', 'üéâ', 'üéÅ', '‚ú®', 'ü•≥', 'üòç', 'ü•∞', 'üåü', 'üí´', 'üí•', 'üî•', 'üåà'];
        
        // Memory data
        const memories = [
            { img: '11.jpeg', text: 'Lost in my own little world, but my heart still whispers your name' },
            { img: '21.jpeg', text: 'Your beautiful smile that lights up my worldSoft emotions wrapped in florals‚Äîcalm, affectionate, and introspective.' },
            { img: '31.jpeg', text: 'Direct gaze with a serene expression‚Äîconfidence blended with innocence' },
            { img: '41.jpeg', text: 'A gentle smile framed with simplicity, expressing warmth and subtle charm' },
            { img: '51.jpeg', text: 'Lost in thought, eyes looking upward‚Äîan expression of curiosity and daydreaming' },
            { img: '61.jpeg', text: 'Quiet confidence with a soft glance‚Äîgrace captured in a calm, poised moment' },
            { img: '71.jpeg', text: 'Elegance in motion‚Äîstanding tall amid lights and celebration, radiating self-assurance' },
            { img: '81.jpeg', text: 'A composed side profile reflecting maturity, balance, and quiet confidence' },
            { img: '91.jpeg', text: 'A playful, thoughtful pose‚Äîexpressing softness, grace, and gentle emotion' }
        ];
        
        // Variables for scroll handling
        let isMobile = false;
        let lastScrollTime = 0;
        let scrollObserver = null;
        
        // Create floating emojis
        function createFloatingEmojis(count = 12) {
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.className = 'floating-emoji';
                    const randomEmoji = loveEmojis[Math.floor(Math.random() * loveEmojis.length)];
                    emoji.textContent = randomEmoji;
                    const leftPos = Math.random() * 100;
                    const size = 1.5 + Math.random();
                    const duration = 3 + Math.random() * 3;
                    emoji.style.left = `${leftPos}vw`;
                    emoji.style.fontSize = `${size}rem`;
                    emoji.style.animationDuration = `${duration}s`;
                    emojiContainer.appendChild(emoji);
                    
                    // Remove emoji after animation completes
                    setTimeout(() => {
                        if (emoji.parentNode === emojiContainer) {
                            emojiContainer.removeChild(emoji);
                        }
                    }, duration * 1000 + 500);
                }, i * 100);
            }
        }
        
        // Create sparkle effect
        function createSparkle(x, y) {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.style.left = `${x}px`;
            sparkle.style.top = `${y}px`;
            document.body.appendChild(sparkle);
            setTimeout(() => {
                if (sparkle.parentNode === document.body) {
                    document.body.removeChild(sparkle);
                }
            }, 300);
        }
        
        // Type text letter by letter
        function typeWriter(text, element, cursorElement = null, speed = 60, callback = null) {
            let i = 0;
            element.innerHTML = "";
            if (cursorElement) cursorElement.style.display = 'inline-block';
            
            function typing() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(typing, speed);
                } else {
                    if (cursorElement) {
                        cursorElement.style.display = 'none';
                        cursorElement.classList.add('cursor-hidden');
                    }
                    if (callback) callback();
                }
            }
            typing();
        }
        
        // Type message fast
        function typeMessage(text, element, speed = 15, callback = null) {
            let i = 0;
            element.innerHTML = "";
            
            function typing() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(typing, speed);
                } else if (callback) {
                    callback();
                }
            }
            typing();
        }
        
        // Show message
        function showMessage() {
            quoteButtonContainer.style.display = 'none';
            
            // Show and animate message box
            messageBox.style.display = 'block';
            setTimeout(() => {
                messageBox.classList.add('visible');
                
                // Type message very fast
                typeMessage(birthdayMessage, messageContent, 10, function() {
                    // Add celebratory emojis
                    for (let i = 0; i < 8; i++) {
                        setTimeout(() => createFloatingEmojis(2), i * 150);
                    }
                });
                
                // Scroll to message
                setTimeout(() => {
                    messageBox.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'center',
                        inline: 'nearest'
                    });
                }, 200);
            }, 50);
        }
        
        // Initialize tilt effect for memory cards (desktop only)
        function initTiltEffect() {
            // Only apply tilt effect on desktop
            if (!isMobile) {
                const cards = document.querySelectorAll('.memory-card');
                
                cards.forEach(card => {
                    card.addEventListener('mousemove', (e) => {
                        const rect = card.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;
                        
                        const centerX = rect.width / 2;
                        const centerY = rect.height / 2;
                        
                        const rotateY = ((x - centerX) / centerX) * 5;
                        const rotateX = ((centerY - y) / centerY) * 5;
                        
                        card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
                    });
                    
                    card.addEventListener('mouseleave', () => {
                        card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(1)';
                    });
                });
            }
        }
        
        // Initialize Intersection Observer for mobile scroll detection
        function initScrollObserver() {
            if (!isMobile) return;
            
            // Clear existing observer if any
            if (scrollObserver) {
                scrollObserver.disconnect();
            }
            
            const options = {
                root: null,
                rootMargin: '0px',
                threshold: 0.7 // When 70% of the card is visible
            };
            
            scrollObserver = new IntersectionObserver((entries) => {
                const now = Date.now();
                
                // Throttle updates to prevent flickering
                if (now - lastScrollTime < 100) return;
                lastScrollTime = now;
                
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Card is in view - show caption
                        entry.target.classList.add('scroll-visible');
                        entry.target.classList.remove('tap-visible');
                    } else {
                        // Card is out of view - hide caption
                        entry.target.classList.remove('scroll-visible');
                    }
                });
            }, options);
            
            // Observe all memory cards
            document.querySelectorAll('.memory-card').forEach(card => {
                scrollObserver.observe(card);
            });
        }
        
        // Handle mobile tap on cards
        function initMobileTap() {
            if (!isMobile) return;
            
            const cards = document.querySelectorAll('.memory-card');
            
            cards.forEach(card => {
                // Use click event for mobile
                card.addEventListener('click', function(e) {
                    // Remove tap-visible from all cards
                    cards.forEach(c => {
                        if (c !== this) {
                            c.classList.remove('tap-visible');
                        }
                    });
                    
                    // Toggle tap-visible on clicked card
                    this.classList.toggle('tap-visible');
                    
                    // Create sparkle effect
                    createSparkle(e.clientX, e.clientY);
                    
                    // If card is now visible, scroll it to center
                    if (this.classList.contains('tap-visible')) {
                        setTimeout(() => {
                            this.scrollIntoView({ 
                                behavior: 'smooth', 
                                block: 'center',
                                inline: 'nearest'
                            });
                        }, 100);
                    }
                });
            });
            
            // Hide all tap-visible cards when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.memory-card')) {
                    cards.forEach(card => {
                        card.classList.remove('tap-visible');
                    });
                }
            });
        }
        
        // Check if device is mobile
        function checkMobileDevice() {
            isMobile = window.innerWidth <= 768;
            return isMobile;
        }
        
        // Initialize
        function init() {
            checkMobileDevice();
            createFloatingEmojis(15);
            
            // Hide cursors initially
            titleCursor.style.display = 'none';
            subtitleCursor.style.display = 'none';
            
            // Type title and name
            setTimeout(() => {
                typeWriter(titleText, titleElement, titleCursor, 70, function() {
                    setTimeout(() => {
                        typeWriter(nameText, nameElement, titleCursor, 70, function() {
                            setTimeout(() => {
                                typeWriter(subtitleText, subtitleElement, subtitleCursor, 60, function() {
                                    // Show button after everything is typed
                                    memoriesBtn.style.opacity = '1';
                                    memoriesBtn.style.visibility = 'visible';
                                });
                            }, 200);
                        });
                    }, 100);
                });
            }, 300);
            
            // Create gallery
            memories.forEach((memory, index) => {
                const memoryCard = document.createElement('div');
                memoryCard.className = 'memory-card';
                memoryCard.innerHTML = `
                    <img src="${memory.img}" alt="Memory ${index + 1}" class="memory-img" 
                         onerror="this.onerror=null; this.src='https://placehold.co/400x300/f8f5f0/5d534a?text=Memory+${index + 1}'">
                    <div class="memory-overlay">
                        <p class="memory-text">${memory.text}</p>
                    </div>
                `;
                gallery.appendChild(memoryCard);
            });
            
            // Initialize effects
            setTimeout(() => {
                initTiltEffect();
                if (isMobile) {
                    initScrollObserver();
                    initMobileTap();
                }
            }, 1000);
            
            // Initial emoji creation
            setInterval(() => {
                if (emojiContainer.children.length < 30) {
                    createFloatingEmojis(3);
                }
            }, 3000);
            
            // Handle window resize
            window.addEventListener('resize', () => {
                const wasMobile = isMobile;
                checkMobileDevice();
                
                // Reinitialize effects if mobile state changed
                if (wasMobile !== isMobile) {
                    initTiltEffect();
                    if (isMobile) {
                        initScrollObserver();
                        initMobileTap();
                        scrollIndicator.style.display = 'block';
                    } else {
                        if (scrollObserver) {
                            scrollObserver.disconnect();
                            scrollObserver = null;
                        }
                        scrollIndicator.style.display = 'none';
                    }
                }
                
                // Adjust message box height for mobile
                if (isMobile) {
                    messageBox.style.maxHeight = '60vh';
                } else {
                    messageBox.style.maxHeight = '70vh';
                }
            });
        }
        
        // Show memories
        memoriesBtn.addEventListener('click', () => {
            memoriesSection.style.display = 'block';
            memoriesBtn.style.display = 'none';
            
            setTimeout(() => {
                quoteButtonContainer.style.display = 'block';
                quoteButtonContainer.style.opacity = '1';
                
                // Reinitialize effects for newly shown cards
                setTimeout(() => {
                    initTiltEffect();
                    if (isMobile) {
                        initScrollObserver();
                        initMobileTap();
                    }
                }, 500);
            }, 800);
            
            createSparkle(memoriesBtn.offsetLeft + memoriesBtn.offsetWidth/2, 
                         memoriesBtn.offsetTop + memoriesBtn.offsetHeight/2);
            
            setTimeout(() => {
                memoriesSection.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start'
                });
            }, 100);
            
            for (let i = 0; i < 6; i++) {
                setTimeout(() => createFloatingEmojis(2), i * 80);
            }
        });
        
        // Show message when button clicked
        quoteBtn.addEventListener('click', showMessage);
        
        // Add sparkle effect on clicks
        document.addEventListener('click', (e) => {
            if (Math.random() > 0.8 && e.target.tagName !== 'BUTTON') {
                createSparkle(e.clientX, e.clientY);
            }
        });
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
